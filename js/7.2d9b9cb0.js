"use strict";(self["webpackChunkbiscuit_paradise"]=self["webpackChunkbiscuit_paradise"]||[]).push([[7],{9007:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var t=a(3396),s=a(7139),o=a(9242);const i={class:"container py-5"},r=(0,t.uE)('<div class="row d-flex justify-content-center"><div class="col col-lg-8 d-flex align-items-center justify-content-around text-nowrap"><div class="border d-inline-block text-center p-4 bg-dark text-white" style="width:150px;height:150px;"><i class="bi bi-list-check fs-4"></i><p class="mt-2">填寫資料</p><p class="mb-0">STEP 1</p></div><i class="bi bi-arrow-right fs-1 d-none d-sm-block"></i><div class="border d-inline-block text-center p-4" style="width:150px;height:150px;"><i class="bi bi-credit-card fs-4"></i><p class="mt-2">確認付款</p><p class="mb-0">STEP 2</p></div><i class="bi bi-arrow-right fs-1 d-none d-sm-block"></i><div class="border d-inline-block text-center p-4" style="width:150px;height:150px;"><i class="bi bi-clipboard-check fs-4"></i><p class="mt-2">送出訂單</p><p class="mb-0">STEP 3</p></div></div></div>',1),c={class:"my-5 row flex-row-reverse justify-content-around"},d={class:"col-md-4"},n={class:"border p-3"},u={class:"table align-middle justify-content-around"},m=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"產品名稱"),(0,t._)("th",null,"數量"),(0,t._)("th",null,"價格")])],-1),p={style:{width:"100px"}},b={class:"input-group input-group-sm"},f={class:"p-3"},_={class:"d-flex justify-content-between"},h=(0,t._)("p",null,"商品共計:",-1),v={class:"input-group mb-3"},y={key:0,class:"d-flex justify-content-between"},g=(0,t._)("p",null,"合計:",-1),w={key:1,class:"text-success"},x={key:2,class:"d-flex justify-content-between text-success"},k=(0,t._)("p",null,"折扣價：",-1),C={class:"mb-3"},V=(0,t._)("label",{for:"email",class:"form-label"},"Email*",-1),W={class:"mb-3"},$=(0,t._)("label",{for:"name",class:"form-label"},"收件人姓名*",-1),q={class:"mb-3"},P=(0,t._)("label",{for:"tel",class:"form-label"},"收件人電話*",-1),j={class:"mb-3"},z=(0,t._)("label",{for:"address",class:"form-label"},"收件人地址*",-1),D={class:"mb-3"},E=(0,t._)("label",{for:"pay",class:"form-label"},"付款方式*",-1),U=(0,t._)("option",{disabled:"",selected:""},"選擇付款方式",-1),F=(0,t._)("option",{value:"ATM"},"ATM",-1),S=(0,t._)("option",{value:"GooglePay"},"信用卡",-1),L=(0,t._)("option",{value:"ApplePay"},"ApplePay",-1),M=(0,t._)("option",{value:"GooglePay"},"GooglePay",-1),T=[U,F,S,L,M],A={class:"mb-3"},G=(0,t._)("label",{for:"message",class:"form-label"},"留言",-1),H={class:"text-end"};function I(e,l,a,U,F,S){const L=(0,t.up)("LoadingComp"),M=(0,t.up)("Field"),I=(0,t.up)("ErrorMessage"),O=(0,t.up)("Form");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(L,{active:e.isLoading},null,8,["active"]),(0,t._)("div",i,[r,(0,t._)("div",c,[(0,t._)("div",d,[(0,t._)("div",n,[(0,t._)("table",u,[m,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(F.cart.carts,(l=>((0,t.wg)(),(0,t.iD)("tr",{key:l.id},[(0,t._)("td",null,(0,s.zw)(l.product.title),1),(0,t._)("td",p,[(0,t._)("div",b,(0,s.zw)(l.qty)+" / "+(0,s.zw)(l.product.unit),1)]),(0,t._)("td",null,(0,s.zw)(e.$formatFilters.currency(l.final_total)),1)])))),128))])]),(0,t._)("div",f,[(0,t._)("div",_,[h,(0,t._)("p",null,(0,s.zw)(e.$formatFilters.currency(F.cart.total)),1)]),(0,t._)("div",v,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control lh-lg","onUpdate:modelValue":l[0]||(l[0]=e=>F.coupon_code=e),placeholder:"輸入優惠碼"},null,512),[[o.nr,F.coupon_code]]),(0,t._)("button",{type:"button",class:"btn btn-dark",onClick:l[1]||(l[1]=(...e)=>S.addCouponCode&&S.addCouponCode(...e))}," 套用 ")]),F.cart.final_total===F.cart.total?((0,t.wg)(),(0,t.iD)("div",y,[g,(0,t._)("p",null,(0,s.zw)(e.$formatFilters.currency(F.cart.final_total)),1)])):(0,t.kq)("",!0),F.cart.final_total!==F.cart.total?((0,t.wg)(),(0,t.iD)("p",w," 已套用優惠券 ")):(0,t.kq)("",!0),F.cart.final_total!==F.cart.total?((0,t.wg)(),(0,t.iD)("div",x,[k,(0,t._)("p",null,(0,s.zw)(e.$formatFilters.currency(F.cart.final_total)),1)])):(0,t.kq)("",!0)])])]),(0,t.Wm)(O,{class:"col-md-6 border p-3",onSubmit:S.createOrder},{default:(0,t.w5)((({errors:e})=>[(0,t._)("div",C,[V,(0,t.Wm)(M,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:F.form.user.email,"onUpdate:modelValue":l[2]||(l[2]=e=>F.form.user.email=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"email",class:"invalid-feedback"})]),(0,t._)("div",W,[$,(0,t.Wm)(M,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:F.form.user.name,"onUpdate:modelValue":l[3]||(l[3]=e=>F.form.user.name=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"姓名",class:"invalid-feedback"})]),(0,t._)("div",q,[P,(0,t.Wm)(M,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:F.form.user.tel,"onUpdate:modelValue":l[4]||(l[4]=e=>F.form.user.tel=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"電話",class:"invalid-feedback"})]),(0,t._)("div",j,[z,(0,t.Wm)(M,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:F.form.user.address,"onUpdate:modelValue":l[5]||(l[5]=e=>F.form.user.address=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",D,[E,(0,t.wy)((0,t._)("select",{id:"pay",class:"form-select","aria-label":"Default select example","onUpdate:modelValue":l[6]||(l[6]=e=>F.payment=e)},T,512),[[o.bM,F.payment]]),(0,t.Wm)(I,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",A,[G,(0,t.wy)((0,t._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[7]||(l[7]=e=>F.form.message=e)},null,512),[[o.nr,F.form.message]])]),(0,t._)("div",H,[(0,t._)("button",{type:"submit",class:(0,s.C_)(["btn btn-primary shadow-sm",{disabled:"選擇付款方式"===F.payment}])}," 送出訂單 ",2)])])),_:1},8,["onSubmit"])])])],64)}a(560);var O={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},payment:"選擇付款方式",cart:{},coupon_code:"",status:{loadingItem:""}}},methods:{createOrder(){const e="https://vue3-course-api.hexschool.io/api/samtgy-api/order",l=this.form;this.$http.post(e,{data:l}).then((e=>{const l=e.data.orderId;this.$router.push(`/user/checkout/${l}`)}))},getCart(){const e="https://vue3-course-api.hexschool.io/api/samtgy-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.isLoading=!1}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/samtgy-api/coupon",l={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:l}).then((e=>{this.$httpMessageState(e,"加入優惠券"),this.getCart()}))}},created(){this.getCart()}},Y=a(89);const K=(0,Y.Z)(O,[["render",I]]);var Z=K}}]);
//# sourceMappingURL=7.2d9b9cb0.js.map