"use strict";(self["webpackChunkbiscuit_paradise"]=self["webpackChunkbiscuit_paradise"]||[]).push([[677],{677:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});a(560);var s=a(3396),i=a(7139),o=a(9242);const l=t=>((0,s.dD)("data-v-21c9eb12"),t=t(),(0,s.Cn)(),t),r={class:"container py-lg-5"},c={"aria-label":"breadcrumb"},n={class:"breadcrumb"},d={class:"breadcrumb-item"},u=l((()=>(0,s._)("li",{class:"breadcrumb-item"},"購物車",-1))),p=l((()=>(0,s._)("h2",null,[(0,s._)("i",{class:"bi bi-cart3 fs-3"}),(0,s.Uk)(" 購物車")],-1))),h=l((()=>(0,s._)("hr",null,null,-1))),b=l((()=>(0,s._)("i",{class:"bi bi-cart4",style:{"font-size":"150px"}},null,-1))),m=l((()=>(0,s._)("p",{class:"fs-2"},"購物車是空的，來去逛逛吧!",-1))),_={class:"row"},y={class:"col-lg-8"},g=["src","alt","onClick"],C={class:"h6 my-3 my-md-0",style:{width:"30%"}},f={class:"input-group",style:{width:"150px"}},k=["onClick","disabled"],w=l((()=>(0,s._)("i",{class:"bi bi-dash"},null,-1))),v=[w],x=["onUpdate:modelValue"],$=["onClick"],L=l((()=>(0,s._)("i",{class:"bi bi-plus"},null,-1))),q=[L],I={class:"my-3 my-md-0",style:{width:"20%"}},D=["onClick"],z=l((()=>(0,s._)("i",{class:"bi bi-trash"},null,-1))),U=[z],j={class:"border border-primary p-3"},F={class:"d-flex justify-content-between"},V=l((()=>(0,s._)("p",null,"商品共計:",-1))),H={class:"input-group mb-3"},M={key:0,class:"d-flex justify-content-between"},P=l((()=>(0,s._)("p",null,"合計:",-1))),S={key:1,class:"text-success"},W={key:2,class:"d-flex justify-content-between text-success"},Y=l((()=>(0,s._)("p",null,"折扣價：",-1)));function K(t,e,a,l,w,L){const z=(0,s.up)("LoadingComp"),K=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(z,{active:w.isLoading},null,8,["active"]),(0,s._)("div",r,[(0,s._)("nav",c,[(0,s._)("ol",n,[(0,s._)("li",d,[(0,s.Wm)(K,{to:"/user"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),u])]),p,h,(0,s._)("div",{class:(0,i.C_)(["text-center pb-5",{"d-none":0!==w.cart.total}])},[b,m,(0,s._)("button",{type:"button",class:"btn btn-outline-primary shadow-sm",onClick:e[0]||(e[0]=e=>t.$router.push("/user/productList"))}," 看看更多餅乾 ")],2),(0,s._)("div",_,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"border border-primary d-flex flex-column flex-md-row align-items-center p-3 mb-3 text-center",key:e.id},[(0,s._)("img",{src:e.product.imageUrl,class:"productImg",alt:e.product.title,onClick:t=>L.getProduct(e.product.id),style:{cursor:"pointer"}},null,8,g),(0,s._)("p",C,(0,i.zw)(e.product.title),1),(0,s._)("div",f,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t=>L.updateCart(e,e.qty-1),disabled:1==e.qty},v,8,k),(0,s.wy)((0,s._)("input",{type:"text",min:"1","onUpdate:modelValue":t=>e.qty=t,class:"form-control form-control-sm text-center border-dark",readonly:""},null,8,x),[[o.nr,e.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t=>L.updateCart(e,e.qty+1)},q,8,$)]),(0,s._)("p",I," NT"+(0,i.zw)(t.$formatFilters.currency(e.final_total)),1),(0,s._)("button",{type:"button",class:"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white",onClick:t=>L.removeCartItem(e,e.id)},U,8,D)])))),128))]),(0,s._)("div",{class:(0,i.C_)(["col-lg-4 pb-5",{"d-none":0===w.cart.total}])},[(0,s._)("div",j,[(0,s._)("div",F,[V,(0,s._)("p",null,(0,i.zw)(t.$formatFilters.currency(w.cart.total)),1)]),(0,s._)("div",H,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control lh-lg border-dark","onUpdate:modelValue":e[1]||(e[1]=t=>w.coupon_code=t),placeholder:"輸入優惠碼"},null,512),[[o.nr,w.coupon_code]]),(0,s._)("button",{type:"button",class:"btn btn-dark",onClick:e[2]||(e[2]=(...t)=>L.addCouponCode&&L.addCouponCode(...t))}," 套用 ")]),w.cart.final_total===w.cart.total?((0,s.wg)(),(0,s.iD)("div",M,[P,(0,s._)("p",null,(0,i.zw)(t.$formatFilters.currency(w.cart.final_total)),1)])):(0,s.kq)("",!0),w.cart.final_total!==w.cart.total?((0,s.wg)(),(0,s.iD)("p",S," 已套用優惠券 ")):(0,s.kq)("",!0),w.cart.final_total!==w.cart.total?((0,s.wg)(),(0,s.iD)("div",W,[Y,(0,s._)("p",null,(0,i.zw)(t.$formatFilters.currency(w.cart.final_total)),1)])):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:(0,i.C_)(["btn btn-outline-primary shadow-sm w-100",{disabled:0===w.cart.total}]),onClick:e[3]||(e[3]=t=>this.$router.push("/user/checkout"))}," 結帳 ",2)])],2)])])],64)}var N={data(){return{cart:{},coupon_code:"",status:{loadingItem:""},isLoading:!1}},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/samtgy-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1}))},updateCart(t,e=1){const a=`https://vue3-course-api.hexschool.io/api/samtgy-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:e};this.$http.put(a,{data:s}).then((()=>{this.status.loadingItem="",this.getCart()}))},removeCartItem(t,e){this.status.loadingItem=e;const a=`https://vue3-course-api.hexschool.io/api/samtgy-api/cart/${e}`;this.isLoading=!0,this.$http.delete(a).then((a=>{this.$httpMessageState(a,`將"${t.product.title}"移除購物車`),this.status.loadingItem="",this.getCart(),this.emitter.emit("update-cart",e)}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/samtgy-api/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)}},created(){this.getCart()}},T=a(89);const Z=(0,T.Z)(N,[["render",K],["__scopeId","data-v-21c9eb12"]]);var A=Z}}]);
//# sourceMappingURL=677.082267a4.js.map