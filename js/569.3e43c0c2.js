"use strict";(self["webpackChunkbiscuit_paradise"]=self["webpackChunkbiscuit_paradise"]||[]).push([[569],{4226:function(t,i){i.Z={addToFavorite(t){const i=JSON.stringify(t);localStorage.setItem("favoriteList",i)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteList"))}}},569:function(t,i,e){e.r(i),e.d(i,{default:function(){return H}});e(560);var s=e(3396),a=e(7139);const r=t=>((0,s.dD)("data-v-1af77a48"),t=t(),(0,s.Cn)(),t),o={class:"container py-lg-5"},l={"aria-label":"breadcrumb"},c={class:"breadcrumb"},n={class:"breadcrumb-item"},d=r((()=>(0,s._)("li",{class:"breadcrumb-item"},"我的最愛",-1))),u=r((()=>(0,s._)("h2",null,[(0,s._)("i",{class:"bi bi-suit-heart-fill fs-3 text-danger"}),(0,s.Uk)(" 我的最愛")],-1))),p=r((()=>(0,s._)("hr",null,null,-1))),h={class:"row"},f={class:"col-lg-8"},g=r((()=>(0,s._)("i",{class:"bi bi-suit-heart-fill text-danger",style:{"font-size":"150px"}},null,-1))),m=r((()=>(0,s._)("p",{class:"fs-2"},"購物車是空的，來去逛逛吧!",-1))),b=["src","alt","onClick"],v={class:"h5 pt-ms-0 pt-3"},_={class:"d-flex flex-column"},x={key:0,class:"h5 mb-md-0"},w={key:1,class:"h6"},y={key:2,class:"h5 text-danger"},k={class:"d-flex"},C=["onClick"],F=r((()=>(0,s._)("i",{class:"bi bi-cart-plus"},null,-1))),$=[F],L=["onClick"],D=r((()=>(0,s._)("i",{class:"bi bi-trash"},null,-1))),I=[D],z=r((()=>(0,s._)("div",{class:"col-md-4"},[(0,s._)("img",{src:"https://images.unsplash.com/photo-1612845575953-f4b1e3d63160?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8Y29va2llfGVufDB8fDB8fHww",alt:"我的最愛",class:"img-fluid d-none d-lg-block"})],-1)));function P(t,i,e,r,F,D){const P=(0,s.up)("LoadingComp"),S=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(P,{active:F.isLoading},null,8,["active"]),(0,s._)("div",o,[(0,s._)("nav",l,[(0,s._)("ol",c,[(0,s._)("li",n,[(0,s.Wm)(S,{to:"/user"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),d])]),u,p,(0,s._)("div",h,[(0,s._)("div",f,[(0,s._)("div",{class:(0,a.C_)(["text-center pb-5",{"d-none":0!==F.favoriteProducts.length}])},[g,m,(0,s._)("button",{type:"button",class:"btn btn-outline-primary shadow-sm",onClick:i[0]||(i[0]=i=>t.$router.push("/user/productList"))}," 看看更多餅乾 ")],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(F.favoriteProducts,(i=>((0,s.wg)(),(0,s.iD)("div",{class:"border border-primary d-flex flex-column flex-md-row justify-content-between align-items-center p-3 mb-3 text-center",key:i.id},[(0,s._)("img",{src:i.imageUrl,class:"productImg img-fluid",alt:i.title,onClick:t=>D.getProduct(i.id),style:{cursor:"pointer"}},null,8,b),(0,s._)("p",v,(0,a.zw)(i.title),1),(0,s._)("div",_,[i.price===i.origin_price?((0,s.wg)(),(0,s.iD)("p",x,(0,a.zw)(t.$formatFilters.currency(i.origin_price))+" 元 ",1)):(0,s.kq)("",!0),i.price!==i.origin_price?((0,s.wg)(),(0,s.iD)("del",w,"原價 "+(0,a.zw)(t.$formatFilters.currency(i.origin_price))+" 元",1)):(0,s.kq)("",!0),i.price!==i.origin_price?((0,s.wg)(),(0,s.iD)("p",y," 特價 "+(0,a.zw)(t.$formatFilters.currency(i.price))+" 元 ",1)):(0,s.kq)("",!0)]),(0,s._)("div",k,[(0,s._)("button",{type:"button",class:"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white",onClick:t=>D.addCart(i,i.id)},$,8,C),(0,s._)("button",{type:"button",class:"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white",onClick:t=>D.removeFavorite(i,i.id)},I,8,L)])])))),128))]),z])])],64)}var S=e(4226),q={data(){return{favoriteProducts:[],favorite:S.Z.getFavorite()||[],isLoading:!1,status:{loadingItem:""}}},inject:["emitter"],methods:{getFavorite(){const t="https://vue3-course-api.hexschool.io/api/samtgy-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(this.favoriteProducts=t.data.products.filter((t=>this.favorite.includes(t.id)))),this.isLoading=!1}))},addCart(t,i){const e="https://vue3-course-api.hexschool.io/api/samtgy-api/cart";this.isLoading=!0,this.status.loadingItem=i;const s={product_id:i,qty:1};this.$http.post(e,{data:s}).then((e=>{this.status.loadingItem="",this.emitter.emit("update-cart",i),this.isLoading=!1,this.$httpMessageState(e,`將"${t.title}"加入購物車`)}))},getProduct(t){this.$router.push(`/products/${t}`)},removeFavorite(t,i){this.isLoading=!0,this.favorite.splice(this.favorite.indexOf(i),1),S.Z.addToFavorite(this.favorite),this.emitter.emit("update-favorite",this.favorite),this.$httpMessageState({data:{success:!0}},`將"${t.title}"移除我的最愛`),this.getFavorite()}},created(){this.getFavorite()}},M=e(89);const Z=(0,M.Z)(q,[["render",P],["__scopeId","data-v-1af77a48"]]);var H=Z}}]);
//# sourceMappingURL=569.3e43c0c2.js.map