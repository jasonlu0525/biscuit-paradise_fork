{"version":3,"file":"js/569.3e43c0c2.js","mappings":"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","sources":["webpack://biscuit-paradise/./src/methods/favorite.js","webpack://biscuit-paradise/./src/views/user/Favorite.vue","webpack://biscuit-paradise/./src/views/user/Favorite.vue?6016"],"sourcesContent":["export default {\n  addToFavorite (favorite) {\n    const favoriteStr = JSON.stringify(favorite)\n    localStorage.setItem('favoriteList', favoriteStr)\n  },\n  getFavorite () {\n    return JSON.parse(localStorage.getItem('favoriteList'))\n  }\n}\n\n/*\n因為localstorage只能存放string字串，因此要使用json將array陣列轉為字串才可存入，而取得資料則須將記憶體的資料再度轉譯成array陣列。\n-陣列轉字串：JSON.stringify()\n-字串轉陣列 & JSON格式：JSON.parse()\n*/","<template>\n  <LoadingComp :active=\"isLoading\" />\n  <div class=\"container py-lg-5\">\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item\"><router-link to=\"/user\">首頁</router-link></li>\n        <li class=\"breadcrumb-item\">我的最愛</li>\n      </ol>\n    </nav>\n    <h2><i class=\"bi bi-suit-heart-fill fs-3 text-danger\"/> 我的最愛</h2>\n    <hr />\n    <div class=\"row\">\n      <div class=\"col-lg-8\">\n        <div\n          class=\"text-center pb-5\"\n          :class=\"{ 'd-none': favoriteProducts.length !== 0 }\"\n        >\n          <i\n            class=\"bi bi-suit-heart-fill text-danger\"\n            style=\"font-size: 150px\"\n          />\n          <p class=\"fs-2\">購物車是空的，來去逛逛吧!</p>\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-primary shadow-sm\"\n            @click=\"$router.push('/user/productList')\"\n          >\n            看看更多餅乾\n          </button>\n        </div>\n        <div\n          class=\"border border-primary d-flex flex-column  flex-md-row justify-content-between align-items-center p-3 mb-3 text-center\"\n          v-for=\"item in favoriteProducts\"\n          :key=\"item.id\"\n        >\n          <img\n            :src=\"item.imageUrl\"\n            class=\"productImg img-fluid\"\n            :alt=\"item.title\"\n            @click=\"getProduct(item.id)\"\n            style=\"cursor:pointer;\"\n          />\n          <p class=\"h5 pt-ms-0 pt-3\">{{ item.title }}</p>\n          <div class=\"d-flex flex-column\">\n            <p class=\"h5 mb-md-0\" v-if=\"item.price === item.origin_price\">\n              {{ $formatFilters.currency(item.origin_price) }} 元\n            </p>\n            <del class=\"h6\" v-if=\"item.price !== item.origin_price\"\n              >原價 {{ $formatFilters.currency(item.origin_price) }} 元</del\n            >\n            <p class=\"h5 text-danger\" v-if=\"item.price !== item.origin_price\">\n              特價 {{ $formatFilters.currency(item.price) }} 元\n            </p>\n          </div>\n          <div class=\"d-flex\">\n            <button\n              type=\"button\"\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\n              @click=\"addCart(item, item.id)\"\n            >\n              <i class=\"bi bi-cart-plus\"/>\n            </button>\n            <button\n              type=\"button\"\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\n              @click=\"removeFavorite(item, item.id)\"\n            >\n              <i class=\"bi bi-trash\"/>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <img\n          src=\"https://images.unsplash.com/photo-1612845575953-f4b1e3d63160?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8Y29va2llfGVufDB8fDB8fHww\"\n          alt=\"我的最愛\"\n          class=\"img-fluid d-none d-lg-block\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .productImg {\n    width: 150px;\n    height: 100px;\n    -o-object-fit: cover;\n    object-fit: cover;\n}\n</style>\n\n<script>\nimport favorite from '@/methods/favorite'\n\nexport default {\n  data () {\n    return {\n      favoriteProducts: [],\n      favorite: favorite.getFavorite() || [],\n      isLoading: false,\n      status: {\n        loadingItem: ''\n      }\n    }\n  },\n  inject: ['emitter'],\n  methods: {\n    getFavorite () {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      this.isLoading = true\n      this.$http.get(api).then((res) => {\n        if (res.data.success) {\n          this.favoriteProducts = res.data.products.filter((item) =>\n            this.favorite.includes(item.id)\n          )\n        }\n        this.isLoading = false\n      })\n    },\n    addCart (item, id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.isLoading = true\n      this.status.loadingItem = id\n      const cart = {\n        product_id: id,\n        qty: 1\n      }\n      this.$http.post(url, { data: cart }).then((res) => {\n        this.status.loadingItem = ''\n        this.emitter.emit('update-cart', id)\n        this.isLoading = false\n        this.$httpMessageState(res, `將\"${item.title}\"加入購物車`)\n      })\n    },\n    getProduct (id) {\n      this.$router.push(`/products/${id}`)\n    },\n    removeFavorite (item, id) {\n      this.isLoading = true\n      this.favorite.splice(this.favorite.indexOf(id), 1)\n      favorite.addToFavorite(this.favorite)\n      this.emitter.emit('update-favorite', this.favorite)\n      this.$httpMessageState(\n        {\n          data: {\n            success: true\n          }\n        },\n        `將\"${item.title}\"移除我的最愛`\n      )\n      this.getFavorite()\n    }\n  },\n  created () {\n    this.getFavorite()\n  }\n}\n</script>","import { render } from \"./Favorite.vue?vue&type=template&id=1af77a48&scoped=true\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport \"./Favorite.vue?vue&type=style&index=0&id=1af77a48&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1af77a48\"]])\n\nexport default __exports__"],"names":["addToFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","_createTextVNode","style","key","_hoisted_20","_hoisted_23","src","alt","_createElementBlock","_Fragment","_createVNode","_component_LoadingComp","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","default","_withCtx","_","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_normalizeClass","favoriteProducts","length","_hoisted_10","_hoisted_11","type","onClick","_cache","$event","_ctx","$router","push","_renderList","item","id","imageUrl","title","$options","getProduct","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","price","origin_price","_hoisted_15","$formatFilters","currency","_createCommentVNode","_hoisted_16","_hoisted_17","_hoisted_18","addCart","_hoisted_21","_hoisted_19","removeFavorite","_hoisted_24","_hoisted_22","_hoisted_25","data","status","loadingItem","inject","methods","api","this","$http","get","then","res","success","products","filter","includes","url","cart","product_id","qty","post","emitter","emit","$httpMessageState","splice","indexOf","created","__exports__","render"],"sourceRoot":""}